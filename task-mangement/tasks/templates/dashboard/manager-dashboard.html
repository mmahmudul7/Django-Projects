{% extends "dashboard/dashboard.html" %}

{% block title %}Manager Dashboard{% endblock title %}

{% block tasks %}

{% comment %} Tasks row 3  {% endcomment %}
<div class="mb-8">
    {% comment %} All Tasks  {% endcomment %}
    <div class="bg-white rounded-xl shadow-md">
        <div>
            {% comment %} table head   {% endcomment %}
            <div class="grid grid-cols-4 mb-4 text-sm text-gray-500 border-b border-gray-100 p-4">
                <div>TASK TITLE</div>
                <div>PRIORITY AND STATUS</div>
                <div>TEAM</div>
                <div>CREATED AT</div>
            </div>
            {% comment %} table row and data   {% endcomment %}
             {% comment %} Task 1   {% endcomment %}
            
            {% for task in tasks %}
                <div class="divide-y divide-gray-100 border-b border-gray-100">
                    <div class="grid grid-cols-4 p-4 gap-4 items-center">
                        <div class="flex items-center gap-2">
                            <div class="h-2 w-2 bg-green-500 rounded-full">
                                {% comment %} green bullet   {% endcomment %}
                            </div>
                            <div>
                                <span>{{ task.title }}</span>
                                <a href="{% url 'update-task' task.id %}" class="px-2 py-1 bg-yellow-500 text-white rounded-md">Edit</a>
                                
                                <form action="{% url 'delete-task' task.id %}" method="post">
                                    {% csrf_token %}
                                    <button type="submit" class="px-2 py-1 bg-red-500 text-white rounded-md">Delete</button>
                                </form>
                            </div>
                        </div> 
                        <div>
                            <span class="px-3 py-1 mr-6 rounded-full bg-blue-100 text-blue-600 text-sm">
                                {{ task.details.get_priority_display }}
                            </span>
                                
                            <span class="px-3 py-1 rounded-full bg-orange-100 text-orange-600 text-sm">
                                {{ task.status }}
                            </span>
                        </div>

                        <div class="flex -space-x-2">
                            {% for emp in task.assigned_to.all %}
                                <div class="w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white text-sm border-2 border-white">
                                    {{ emp.name | slice:":2" }}
                                </div>
                            {% endfor %}
                        </div>
                        <div>
                            <span class="text-gray-500">{{ task.created_at | timesince }}</span>
                        </div>
                    </div> 
                </div>
            {% endfor %}

            <!--
            {% comment %} Task 2  {% endcomment %}
            <div class="divide-y divide-gray-100 border-b border-gray-100">
                <div class="grid grid-cols-4 p-4 gap-4 items-center">
                    <div class="flex items-center gap-2">
                        <div class="h-2 w-2 bg-orange-500 rounded-full">
                            {% comment %} orange bullet   {% endcomment %}
                        </div>
                        <div>
                            <span>Test Task</span>
                        </div>
                    </div> 
                    <div>
                        <span class="px-3 py-1 rounded-full bg-gray-100 text-black-600 text-sm">
                            Normal
                        </span>
                    </div>
                    <div class="flex -space-x-2">
                        <div class="w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white text-sm border-2 border-white">
                            AJ
                        </div>
                        <div class="w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white text-sm border-2 border-white">
                            EV
                        </div>
                        <div class="w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white text-sm border-2 border-white">
                            B
                        </div>
                    </div>
                    <div>
                        <span class="text-gray-500">9 months ago</span>
                    </div>
                </div> 
            </div>
            {% comment %} Task 3  {% endcomment %}
            <div class="divide-y divide-gray-100 border-b border-gray-100">
                <div class="grid grid-cols-4 p-4 gap-4 items-center">
                    <div class="flex items-center gap-2">
                        <div class="h-2 w-2 bg-red-500 rounded-full">
                            {% comment %} red bullet   {% endcomment %}
                        </div>
                        <div>
                            <span>Test Task</span>
                        </div>
                    </div> 
                    <div>
                        <span class="px-3 py-1 rounded-full bg-red-100 text-red-600 text-sm">
                            High
                        </span>
                    </div>
                    <div class="flex -space-x-2">
                        <div class="w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white text-sm border-2 border-white">
                            CA
                        </div>
                        <div class="w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white text-sm border-2 border-white">
                            JS
                        </div>
                        <div class="w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white text-sm border-2 border-white">
                            AJ
                        </div>
                        <div class="w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white text-sm border-2 border-white">
                            B
                        </div>
                    </div>
                    <div>
                        <span class="text-gray-500">9 months ago</span>
                    </div>
                </div> 
            </div>
            -->

        </div>
    </div>
</div>

{% endblock tasks %}